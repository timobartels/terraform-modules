version: 2

jobs:
  build:
    machine:
      enabled: true

  prepare:
    steps:
      - run:
          name: Install terraform
          command: |
            curl -O https://releases.hashicorp.com/terraform/0.11.3/terraform_0.11.3_linux_amd64.zip
            unzip terraform_0.11.3_linux_amd64.zip
      - run:
          name: Verify terraform installation
          command: terraform version
workflows:
  version: 2
  terraform:
    jobs:
      - prepare:
          requires:
            - build

